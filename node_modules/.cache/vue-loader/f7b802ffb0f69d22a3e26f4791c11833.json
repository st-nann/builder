{"remainingRequest":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nan3ds/3DsProject/pam-builder/src/pages/Image.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/nan3ds/3DsProject/pam-builder/src/pages/Image.vue","mtime":1607429898831},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/babel-loader/lib/index.js","mtime":1605690691451},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/ts-loader/index.js","mtime":1606390504017},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js","mtime":1605690691983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCmltcG9ydCB7IENvbXBvbmVudCwgUHJvcCwgV2F0Y2ggfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwppbXBvcnQgQmFzZUNvbXBvbmVudCBmcm9tICcuLi9jb3JlL0Jhc2VDb21wb25lbnQnCgpAQ29tcG9uZW50CmV4cG9ydCBkZWZhdWx0IGNsYXNzIEltYWdlUGFnZSBleHRlbmRzIEJhc2VDb21wb25lbnQgewogIEBQcm9wKFN0cmluZykgZWxlbWVudElkITogc3RyaW5nCiAgQFByb3AoU3RyaW5nKSBlbGVtZW50TmFtZSE6IHN0cmluZwogIEBQcm9wKCkgZWxlbWVudFByb3BzITogYW55CgogIG1hbmFnZW1lbnQ6IGFueSA9IHt9CiAgY2hhbmdlSW1hZ2UgPSB0cnVlCiAgcHJldmlld0RhdGE6IGFueSA9IHt9CiAgZm9vdGVyRGF0YSA9IHt9CiAgaW1hZ2VEYXRhOiBhbnkgPSB7fQoKICBnZXRJbWFnZURhdGEoZGF0YTogYW55KSB7CiAgICB0aGlzLmltYWdlRGF0YSA9IGRhdGEKICB9CgogIG9uVXBkYXRlSW1hZ2VMaW5rKGRhdGE6IGFueSkgewogICAgdGhpcy5jaGFuZ2VJbWFnZSA9IGRhdGEuY2hhbmdlSW1hZ2UKICAgIHRoaXMuaW1hZ2VEYXRhLmltYWdlVXJsID0gZGF0YS51cmwKICB9CgogIGRvQXNzaWduU3R5bGUoKSB7CiAgICBjb25zdCBwcmV2aWV3U3R5bGU6IGFueSA9IHt9CiAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5wcmV2aWV3RGF0YSkgIT09ICd7fScpIHsKICAgICAgaWYgKHRoaXMucHJldmlld0RhdGFbJ2JvcmRlci1ib3R0b20nXSkgewogICAgICAgIGNvbnN0IGJvcmRlciA9IHRoaXMucHJldmlld0RhdGFbJ2JvcmRlci1ib3R0b20nXQogICAgICAgIHByZXZpZXdTdHlsZVsnYm9yZGVyLWJvdHRvbSddID0gYCR7Ym9yZGVyLndpZHRofSAke2JvcmRlci5zdHlsZX0gJHtib3JkZXIuY29sb3J9YAogICAgICB9CiAgICAgIGlmICh0aGlzLnByZXZpZXdEYXRhWydiYWNrZ3JvdW5kLWNvbG9yJ10pIHsKICAgICAgICBwcmV2aWV3U3R5bGVbJ2JhY2tncm91bmQtY29sb3InXSA9IHRoaXMucHJldmlld0RhdGFbJ2JhY2tncm91bmQtY29sb3InXQogICAgICB9CiAgICB9CiAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChgaW1hZ2UtcHJldmlldy0ke3RoaXMuZWxlbWVudElkfWApPy5zZXRBdHRyaWJ1dGUoCiAgICAgICdzdHlsZScsCiAgICAgIEpTT04uc3RyaW5naWZ5KHsuLi5wcmV2aWV3U3R5bGV9KQogICAgICAgIC5zdWJzdHJpbmcoMSwgSlNPTi5zdHJpbmdpZnkoey4uLnByZXZpZXdTdHlsZX0pLmxlbmd0aCAtIDEpCiAgICAgICAgLnJlcGxhY2VBbGwoJywnLCAnOycpCiAgICAgICAgLnJlcGxhY2VBbGwoJyInLCAnJykKICAgICkKICB9CgogIG9uVXBkYXRlTWFuYWdlbWVudChkYXRhOiBhbnkpIHsKICAgIHRoaXMubWFuYWdlbWVudCA9IGRhdGEKICAgIHRoaXMuZG9FbWl0RGF0YSgpCiAgfQoKICBvblVwZGF0ZUNoYW5nZUltYWdlKGNoYW5nZTogYm9vbGVhbikgewogICAgdGhpcy5jaGFuZ2VJbWFnZSA9IGNoYW5nZQogIH0KCiAgb25VcGRhdGVQcmV2aWV3KGRhdGE6IGFueSkgewogICAgdGhpcy5wcmV2aWV3RGF0YSA9IHt9CiAgICB0aGlzLnByZXZpZXdEYXRhID0gZGF0YQogICAgdGhpcy5kb0Fzc2lnblN0eWxlKCkKICB9CgogIG9uVXBkYXRlRm9vdGVyUGFuZWxEYXRhKGRhdGE6IGFueSkgewogICAgdGhpcy5mb290ZXJEYXRhID0gZGF0YQogICAgdGhpcy5tYW5hZ2VtZW50LmVkaXQgPSBmYWxzZQogICAgaWYgKGRhdGEpIHsgdGhpcy5kb0VtaXREYXRhKCkgfQogIH0KCiAgZG9FbWl0RGF0YSgpIHsKICAgIGlmICh0aGlzLm1hbmFnZW1lbnQuZGVsZXRlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2RlbGV0ZScsIHRoaXMuZWxlbWVudElkKQogICAgfSBlbHNlIGlmICh0aGlzLm1hbmFnZW1lbnQuZHVwbGljYXRlKSB7CiAgICAgIHRoaXMuJGVtaXQoJ2R1cGxpY2F0ZScsIHsKICAgICAgICBpZDogdGhpcy5lbGVtZW50SWQsCiAgICAgICAgcG9zaXRpb246IHRoaXMubWFuYWdlbWVudC5wb3NpdGlvbiwKICAgICAgICBkdXBsaWNhdGU6IHRoaXMubWFuYWdlbWVudC5kdXBsaWNhdGUKICAgICAgfSkKICAgIH0gZWxzZSB7CiAgICAgIHRoaXMuJGVtaXQoJ2RvbmUnLCB7CiAgICAgICAgaWQ6IHRoaXMuZWxlbWVudElkLAogICAgICAgIHByb3BzOiB7IC4uLnRoaXMuaW1hZ2VEYXRhLCAuLi50aGlzLmZvb3RlckRhdGEgfQogICAgICB9KQogICAgfQogIH0KCiAgZG9FbWl0QWRkRWxlbWVudChkYXRhOiBhbnkpIHsKICAgIHRoaXMuJGVtaXQoJ2FkZCcsIHsgaWQ6IHRoaXMuZWxlbWVudElkLCAuLi5kYXRhIH0pCiAgfQoKICBAV2F0Y2goJ21hbmFnZW1lbnQnLCB7IGRlZXA6IHRydWV9KQogIG9uRWRpdCgpIHsKICAgIGlmICh0aGlzLiRyZWZzW2Btb2RhbC1lZGl0LSR7dGhpcy5lbGVtZW50SWR9YF0pIHsKICAgICAgdGhpcy4kcmVmc1tgbW9kYWwtZWRpdC0ke3RoaXMuZWxlbWVudElkfWBdLmlzT3Blbk1vZGFsID0gdGhpcy5tYW5hZ2VtZW50LmVkaXQKICAgIH0KICB9Cn0K"},{"version":3,"sources":["Image.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA6DA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Image.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <span style=\"width: 100%;\">\n    <BoxComponent\n      :element=\"elementName\"\n      :action=\"management\"\n      @click=\"doEmitAddElement\"\n    >\n      <template slot=\"image-content\">\n\n      </template>\n      <template slot=\"button-management\">\n        <MainButtonComponent\n          class=\"button-box\"\n          :elementId=\"elementId\"\n          @click=\"onUpdateManagement\"\n        />\n      </template>\n    </BoxComponent>\n    <ModalComponent\n      :ref=\"`modal-edit-${elementId}`\"\n      :modal=\"{ width: changeImage ? 900 : 1000, action: 'edit', button: { custom: true } }\"\n      :elementId=\"elementId\"\n    >\n      <template slot=\"content\">\n        <div class=\"modal-content-image\">\n          <ImageAssetContent\n            v-if=\"changeImage\"\n            @click=\"onUpdateImageLink\"\n          />\n          <div v-else>\n            <ImageToolbarPanel @change=\"getImageData\" />\n            <div :id=\"`image-preview-${elementId}`\" class=\"image-preview-container\">\n              <img\n                v-if=\"imageData && imageData.imageUrl\"\n                class=\"image-preview\"\n                :src=\"imageData.imageUrl\"\n              />\n              <div v-else class=\"no-image\">\n                <i class=\"mdi mdi-folder-multiple-image no-image-icon\" />\n                <div class=\"no-image-text\">No Image</div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n      <template slot=\"action-custom\">\n        <FooterPanel\n          v-if=\"!changeImage\"\n          :elementProps=\"elementProps\"\n          :elementName=\"elementName\"\n          :management=\"management\"\n          @change=\"onUpdatePreview\"\n          @changeImage=\"onUpdateChangeImage\"\n          @click=\"onUpdateFooterPanelData\"\n        />\n      </template>\n    </ModalComponent>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Watch } from 'vue-property-decorator'\nimport BaseComponent from '../core/BaseComponent'\n\n@Component\nexport default class ImagePage extends BaseComponent {\n  @Prop(String) elementId!: string\n  @Prop(String) elementName!: string\n  @Prop() elementProps!: any\n\n  management: any = {}\n  changeImage = true\n  previewData: any = {}\n  footerData = {}\n  imageData: any = {}\n\n  getImageData(data: any) {\n    this.imageData = data\n  }\n\n  onUpdateImageLink(data: any) {\n    this.changeImage = data.changeImage\n    this.imageData.imageUrl = data.url\n  }\n\n  doAssignStyle() {\n    const previewStyle: any = {}\n    if (JSON.stringify(this.previewData) !== '{}') {\n      if (this.previewData['border-bottom']) {\n        const border = this.previewData['border-bottom']\n        previewStyle['border-bottom'] = `${border.width} ${border.style} ${border.color}`\n      }\n      if (this.previewData['background-color']) {\n        previewStyle['background-color'] = this.previewData['background-color']\n      }\n    }\n    document.getElementById(`image-preview-${this.elementId}`)?.setAttribute(\n      'style',\n      JSON.stringify({...previewStyle})\n        .substring(1, JSON.stringify({...previewStyle}).length - 1)\n        .replaceAll(',', ';')\n        .replaceAll('\"', '')\n    )\n  }\n\n  onUpdateManagement(data: any) {\n    this.management = data\n    this.doEmitData()\n  }\n\n  onUpdateChangeImage(change: boolean) {\n    this.changeImage = change\n  }\n\n  onUpdatePreview(data: any) {\n    this.previewData = {}\n    this.previewData = data\n    this.doAssignStyle()\n  }\n\n  onUpdateFooterPanelData(data: any) {\n    this.footerData = data\n    this.management.edit = false\n    if (data) { this.doEmitData() }\n  }\n\n  doEmitData() {\n    if (this.management.delete) {\n      this.$emit('delete', this.elementId)\n    } else if (this.management.duplicate) {\n      this.$emit('duplicate', {\n        id: this.elementId,\n        position: this.management.position,\n        duplicate: this.management.duplicate\n      })\n    } else {\n      this.$emit('done', {\n        id: this.elementId,\n        props: { ...this.imageData, ...this.footerData }\n      })\n    }\n  }\n\n  doEmitAddElement(data: any) {\n    this.$emit('add', { id: this.elementId, ...data })\n  }\n\n  @Watch('management', { deep: true})\n  onEdit() {\n    if (this.$refs[`modal-edit-${this.elementId}`]) {\n      this.$refs[`modal-edit-${this.elementId}`].isOpenModal = this.management.edit\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  @import '../assets/scss/Main.scss';\n</style>\n"]}]}