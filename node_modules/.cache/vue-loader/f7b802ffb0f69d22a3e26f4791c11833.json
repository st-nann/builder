{"remainingRequest":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nan3ds/3DsProject/pam-builder/src/pages/Image.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/nan3ds/3DsProject/pam-builder/src/pages/Image.vue","mtime":1608002283601},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/babel-loader/lib/index.js","mtime":1605690691451},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/ts-loader/index.js","mtime":1606390504017},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js","mtime":1605690691983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKCgoKaW1wb3J0IHsgQ29tcG9uZW50LCBQcm9wLCBXYXRjaCB9IGZyb20gJ3Z1ZS1wcm9wZXJ0eS1kZWNvcmF0b3InCmltcG9ydCBCYXNlQ29tcG9uZW50IGZyb20gJy4uL2NvcmUvQmFzZUNvbXBvbmVudCcKCkBDb21wb25lbnQKZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VQYWdlIGV4dGVuZHMgQmFzZUNvbXBvbmVudCB7CiAgQFByb3AoU3RyaW5nKSBlbGVtZW50SWQhOiBzdHJpbmcKICBAUHJvcChTdHJpbmcpIGVsZW1lbnROYW1lITogc3RyaW5nCiAgQFByb3AoKSBlbGVtZW50UHJvcHMhOiBhbnkKCiAgbWFuYWdlbWVudDogYW55ID0ge30KICBwcmV2aWV3RGF0YTogYW55ID0ge30KICBpbWFnZURhdGE6IGFueSA9IHt9CiAgZm9vdGVyRGF0YSA9IHt9CiAgY2hhbmdlSW1hZ2UgPSBmYWxzZQogIGltYWdlVXJsID0gJycKCiAgZ2V0SW1hZ2VEYXRhKGRhdGE6IGFueSkgewogICAgdGhpcy5pbWFnZURhdGEgPSB7IC4uLmRhdGEgfQogICAgdGhpcy5kb0Fzc2lnblN0eWxlKCkKICB9CgogIG9uVXBkYXRlQ2hhbmdlSW1hZ2UoZGF0YTogYW55KSB7CiAgICB0aGlzLmNoYW5nZUltYWdlID0gZGF0YS5jaGFuZ2VJbWFnZQogICAgaWYgKGRhdGEudXJsKSB7IHRoaXMuaW1hZ2VVcmwgPSBkYXRhLnVybCB9CiAgICB0aGlzLmRvQXNzaWduU3R5bGUoKQogIH0KCiAgZG9Bc3NpZ25TdHlsZSgpIHsKICAgIE9iamVjdC5hc3NpZ24odGhpcy5wcmV2aWV3RGF0YSwgdGhpcy5pbWFnZURhdGEpCiAgICBjb25zdCBzZWxmID0gdGhpcwogICAgY29uc3QgcHJldmlld0NvbnRhaW5lclN0eWxlOiBhbnkgPSB7fQogICAgY29uc3QgcHJldmlld0ltYWdlU3R5bGU6IGFueSA9IHt9CiAgICBpZiAoSlNPTi5zdHJpbmdpZnkodGhpcy5wcmV2aWV3RGF0YSkgIT09ICd7fScpIHsKICAgICAgY29uc3QgYm9yZGVyID0gdGhpcy5wcmV2aWV3RGF0YVsnYm9yZGVyLWJvdHRvbSddCiAgICAgIGNvbnN0IGJhY2tncm91bmRDb2xvciA9IHRoaXMucHJldmlld0RhdGFbJ2JhY2tncm91bmQtY29sb3InXQogICAgICBjb25zdCB3aWR0aCA9IHRoaXMucHJldmlld0RhdGEud2lkdGgKICAgICAgY29uc3QganVzdGlmeSA9IHRoaXMucHJldmlld0RhdGEuZmxleGJveFsnanVzdGlmeS1jb250ZW50J10KICAgICAgY29uc3QgYWxpZ24gPSB0aGlzLnByZXZpZXdEYXRhLmZsZXhib3hbJ2FsaWduLWl0ZW1zJ10KICAgICAgaWYgKGJvcmRlcikgeyBwcmV2aWV3Q29udGFpbmVyU3R5bGVbJ2JvcmRlci1ib3R0b20nXSA9IGAke2JvcmRlci53aWR0aH0gJHtib3JkZXIuc3R5bGV9ICR7Ym9yZGVyLmNvbG9yfWAgfQogICAgICBpZiAoYmFja2dyb3VuZENvbG9yKSB7IHByZXZpZXdDb250YWluZXJTdHlsZVsnYmFja2dyb3VuZC1jb2xvciddID0gYmFja2dyb3VuZENvbG9yIH0KICAgICAgaWYgKHdpZHRoKSB7IHByZXZpZXdJbWFnZVN0eWxlLndpZHRoID0gd2lkdGggfQogICAgICBpZiAoanVzdGlmeSkgeyBwcmV2aWV3Q29udGFpbmVyU3R5bGVbJ2p1c3RpZnktY29udGVudCddID0ganVzdGlmeSB9CiAgICAgIGlmIChhbGlnbikgeyBwcmV2aWV3Q29udGFpbmVyU3R5bGVbJ2FsaWduLWl0ZW1zJ10gPSBhbGlnbiB9CiAgICB9CiAgICBzZXRUaW1lb3V0KCgpID0+IHsKICAgICAgdGhpcy5kb1NldEF0dHJpYnV0ZVN0eWxlKGBpbWFnZS1jb250YWluZXItcHJldmlldy0ke3NlbGYuZWxlbWVudElkfWAsIHByZXZpZXdDb250YWluZXJTdHlsZSkKICAgICAgdGhpcy5kb1NldEF0dHJpYnV0ZVN0eWxlKGBpbWFnZS1wcmV2aWV3LSR7c2VsZi5lbGVtZW50SWR9YCwgcHJldmlld0ltYWdlU3R5bGUpCiAgICB9LCAxMCkKICB9CgogIGRvU2V0QXR0cmlidXRlU3R5bGUoaWQ6IHN0cmluZywgbGlzdHM6IG9iamVjdCkgewogICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoaWQpPy5zZXRBdHRyaWJ1dGUoCiAgICAgICdzdHlsZScsCiAgICAgIEpTT04uc3RyaW5naWZ5KHsuLi5saXN0c30pCiAgICAgICAgLnN1YnN0cmluZygxLCBKU09OLnN0cmluZ2lmeSh7Li4ubGlzdHN9KS5sZW5ndGggLSAxKQogICAgICAgIC5yZXBsYWNlQWxsKCcsJywgJzsnKQogICAgICAgIC5yZXBsYWNlQWxsKCciJywgJycpCiAgICApCiAgfQoKICBvblVwZGF0ZU1hbmFnZW1lbnQoZGF0YTogYW55KSB7CiAgICB0aGlzLm1hbmFnZW1lbnQgPSBkYXRhCiAgICBpZiAodGhpcy5tYW5hZ2VtZW50LmR1cGxpY2F0ZSB8fCB0aGlzLm1hbmFnZW1lbnQuZGVsZXRlKSB7CiAgICAgIHRoaXMuZG9FbWl0RGF0YSgpCiAgICB9CiAgfQoKICBvblVwZGF0ZVByZXZpZXcoZGF0YTogYW55KSB7CiAgICB0aGlzLnByZXZpZXdEYXRhID0ge30KICAgIHRoaXMucHJldmlld0RhdGEgPSBkYXRhCiAgICB0aGlzLmNoYW5nZUltYWdlID0gZGF0YS5jaGFuZ2VJbWFnZSB8fCBmYWxzZQogICAgdGhpcy5kb0Fzc2lnblN0eWxlKCkKICB9CgogIG9uVXBkYXRlRm9vdGVyUGFuZWxEYXRhKGRhdGE6IGFueSkgewogICAgdGhpcy5mb290ZXJEYXRhID0gZGF0YQogICAgdGhpcy5tYW5hZ2VtZW50LmVkaXQgPSBmYWxzZQogICAgaWYgKGRhdGEpIHsgdGhpcy5kb0VtaXREYXRhKCkgfQogIH0KCiAgZG9BZGRJbWFnZSgpIHsKICAgIHRoaXMuY2hhbmdlSW1hZ2UgPSB0cnVlCiAgfQoKICBkb0VtaXREYXRhKCkgewogICAgaWYgKHRoaXMubWFuYWdlbWVudC5kZWxldGUpIHsKICAgICAgdGhpcy4kZW1pdCgnZGVsZXRlJywgdGhpcy5lbGVtZW50SWQpCiAgICB9IGVsc2UgaWYgKHRoaXMubWFuYWdlbWVudC5kdXBsaWNhdGUpIHsKICAgICAgdGhpcy4kZW1pdCgnZHVwbGljYXRlJywgewogICAgICAgIGlkOiB0aGlzLmVsZW1lbnRJZCwKICAgICAgICBwb3NpdGlvbjogdGhpcy5tYW5hZ2VtZW50LnBvc2l0aW9uLAogICAgICAgIGR1cGxpY2F0ZTogdGhpcy5tYW5hZ2VtZW50LmR1cGxpY2F0ZQogICAgICB9KQogICAgfSBlbHNlIHsKICAgICAgdGhpcy4kZW1pdCgnZG9uZScsIHsKICAgICAgICBpZDogdGhpcy5lbGVtZW50SWQsCiAgICAgICAgcHJvcHM6IHsKICAgICAgICAgIHVybDogdGhpcy5pbWFnZVVybCwKICAgICAgICAgIC4uLnRoaXMucHJldmlld0RhdGEKICAgICAgICB9CiAgICAgIH0pCiAgICB9CiAgfQoKICBkb0VtaXRBZGRFbGVtZW50KGRhdGE6IGFueSkgewogICAgdGhpcy4kZW1pdCgnYWRkJywgeyBpZDogdGhpcy5lbGVtZW50SWQsIC4uLmRhdGEgfSkKICB9CgogIEBXYXRjaCgnbWFuYWdlbWVudCcsIHsgZGVlcDogdHJ1ZSB9KQogIG9uRWRpdCgpIHsKICAgIGNvbnN0IHJlZiA9IHRoaXMuJHJlZnNbYG1vZGFsLWVkaXQtJHt0aGlzLmVsZW1lbnRJZH1gXQogICAgaWYgKHJlZikgewogICAgICByZWYuaXNPcGVuTW9kYWwgPSB0aGlzLm1hbmFnZW1lbnQuZWRpdAogICAgICBpZiAocmVmLmlzT3Blbk1vZGFsICYmIHRoaXMuZWxlbWVudFByb3BzKSB7CiAgICAgICAgdGhpcy5pbWFnZVVybCA9IHRoaXMuZWxlbWVudFByb3BzLnVybAogICAgICAgIGlmICh0aGlzLmVsZW1lbnRQcm9wcy51cmwpIHsKICAgICAgICAgIHRoaXMuY2hhbmdlSW1hZ2UgPSB0cnVlCiAgICAgICAgfQogICAgICB9CiAgICB9CiAgfQp9Cg=="},{"version":3,"sources":["Image.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAiFA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"Image.vue","sourceRoot":"src/pages","sourcesContent":["<template>\n  <span style=\"width: 100%;\">\n    <BoxComponent\n      :elementName=\"elementName\"\n      :elementProps=\"elementProps\"\n      :action=\"management\"\n      @click=\"doEmitAddElement\"\n    >\n      <template slot=\"content\">\n        <img\n          v-if=\"elementProps.url\"\n          :src=\"elementProps.url\"\n          :width=\"elementProps.width || '100%'\"\n        />\n      </template>\n      <template slot=\"button-management\">\n        <MainButtonComponent\n          class=\"button-box\"\n          :elementId=\"elementId\"\n          @click=\"onUpdateManagement\"\n        />\n      </template>\n    </BoxComponent>\n    <ModalComponent\n      :ref=\"`modal-edit-${elementId}`\"\n      :modal=\"{ width: changeImage ? 900 : 1000, action: 'edit', button: { custom: true } }\"\n      :elementId=\"elementId\"\n    >\n      <template slot=\"content\">\n        <div class=\"modal-content-image\">\n          <ImageAssetContent\n            v-show=\"changeImage\"\n            :changeImage=\"changeImage\"\n            :imageUrl=\"imageUrl\"\n            @click=\"onUpdateChangeImage\"\n          />\n          <div v-show=\"!changeImage\">\n            <ImageToolbarPanel\n              :elementId=\"elementId\"\n              :elementProps=\"elementProps\"\n              :management=\"management\"\n              :imageUrl=\"imageUrl\"\n              @change=\"getImageData\"\n            />\n            <div :id=\"`image-container-preview-${elementId}`\" class=\"image-preview-container\">\n              <img\n                :id=\"`image-preview-${elementId}`\"\n                v-if=\"imageUrl\"\n                class=\"image-preview\"\n                :src=\"imageUrl\"\n              />\n              <div v-else class=\"no-image\">\n                <i class=\"mdi mdi-image-plus no-image-icon\" />\n                <p class=\"no-image-text\">click the below button to add image</p>\n                <SquareButtonComponent\n                  label=\"Browse\"\n                  className=\"no-image-button clickable\"\n                  @click=\"doAddImage\"\n                />\n              </div>\n            </div>\n          </div>\n        </div>\n      </template>\n      <template slot=\"action-custom\">\n        <FooterPanel\n          v-show=\"!changeImage\"\n          :elementId=\"elementId\"\n          :elementName=\"elementName\"\n          :elementProps=\"elementProps\"\n          :management=\"management\"\n          :imageUrl=\"imageUrl\"\n          @change=\"onUpdatePreview\"\n          @click=\"onUpdateFooterPanelData\"\n        />\n      </template>\n    </ModalComponent>\n  </span>\n</template>\n\n<script lang=\"ts\">\nimport { Component, Prop, Watch } from 'vue-property-decorator'\nimport BaseComponent from '../core/BaseComponent'\n\n@Component\nexport default class ImagePage extends BaseComponent {\n  @Prop(String) elementId!: string\n  @Prop(String) elementName!: string\n  @Prop() elementProps!: any\n\n  management: any = {}\n  previewData: any = {}\n  imageData: any = {}\n  footerData = {}\n  changeImage = false\n  imageUrl = ''\n\n  getImageData(data: any) {\n    this.imageData = { ...data }\n    this.doAssignStyle()\n  }\n\n  onUpdateChangeImage(data: any) {\n    this.changeImage = data.changeImage\n    if (data.url) { this.imageUrl = data.url }\n    this.doAssignStyle()\n  }\n\n  doAssignStyle() {\n    Object.assign(this.previewData, this.imageData)\n    const self = this\n    const previewContainerStyle: any = {}\n    const previewImageStyle: any = {}\n    if (JSON.stringify(this.previewData) !== '{}') {\n      const border = this.previewData['border-bottom']\n      const backgroundColor = this.previewData['background-color']\n      const width = this.previewData.width\n      const justify = this.previewData.flexbox['justify-content']\n      const align = this.previewData.flexbox['align-items']\n      if (border) { previewContainerStyle['border-bottom'] = `${border.width} ${border.style} ${border.color}` }\n      if (backgroundColor) { previewContainerStyle['background-color'] = backgroundColor }\n      if (width) { previewImageStyle.width = width }\n      if (justify) { previewContainerStyle['justify-content'] = justify }\n      if (align) { previewContainerStyle['align-items'] = align }\n    }\n    setTimeout(() => {\n      this.doSetAttributeStyle(`image-container-preview-${self.elementId}`, previewContainerStyle)\n      this.doSetAttributeStyle(`image-preview-${self.elementId}`, previewImageStyle)\n    }, 10)\n  }\n\n  doSetAttributeStyle(id: string, lists: object) {\n    document.getElementById(id)?.setAttribute(\n      'style',\n      JSON.stringify({...lists})\n        .substring(1, JSON.stringify({...lists}).length - 1)\n        .replaceAll(',', ';')\n        .replaceAll('\"', '')\n    )\n  }\n\n  onUpdateManagement(data: any) {\n    this.management = data\n    if (this.management.duplicate || this.management.delete) {\n      this.doEmitData()\n    }\n  }\n\n  onUpdatePreview(data: any) {\n    this.previewData = {}\n    this.previewData = data\n    this.changeImage = data.changeImage || false\n    this.doAssignStyle()\n  }\n\n  onUpdateFooterPanelData(data: any) {\n    this.footerData = data\n    this.management.edit = false\n    if (data) { this.doEmitData() }\n  }\n\n  doAddImage() {\n    this.changeImage = true\n  }\n\n  doEmitData() {\n    if (this.management.delete) {\n      this.$emit('delete', this.elementId)\n    } else if (this.management.duplicate) {\n      this.$emit('duplicate', {\n        id: this.elementId,\n        position: this.management.position,\n        duplicate: this.management.duplicate\n      })\n    } else {\n      this.$emit('done', {\n        id: this.elementId,\n        props: {\n          url: this.imageUrl,\n          ...this.previewData\n        }\n      })\n    }\n  }\n\n  doEmitAddElement(data: any) {\n    this.$emit('add', { id: this.elementId, ...data })\n  }\n\n  @Watch('management', { deep: true })\n  onEdit() {\n    const ref = this.$refs[`modal-edit-${this.elementId}`]\n    if (ref) {\n      ref.isOpenModal = this.management.edit\n      if (ref.isOpenModal && this.elementProps) {\n        this.imageUrl = this.elementProps.url\n        if (this.elementProps.url) {\n          this.changeImage = true\n        }\n      }\n    }\n  }\n}\n</script>\n\n<style lang=\"scss\">\n  @import '../assets/scss/Main.scss';\n</style>\n"]}]}