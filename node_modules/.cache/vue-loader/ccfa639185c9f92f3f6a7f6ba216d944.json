{"remainingRequest":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js??vue-loader-options!/Users/nan3ds/3DsProject/pam-builder/src/builder/BuilderCanvas.vue?vue&type=script&lang=ts&","dependencies":[{"path":"/Users/nan3ds/3DsProject/pam-builder/src/builder/BuilderCanvas.vue","mtime":1607942810844},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/babel-loader/lib/index.js","mtime":1605690691451},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/ts-loader/index.js","mtime":1606390504017},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/cache-loader/dist/cjs.js","mtime":1605252086732},{"path":"/Users/nan3ds/3DsProject/pam-builder/node_modules/vue-loader/lib/index.js","mtime":1605690691983}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:CiAgaW1wb3J0IF8gZnJvbSAnbG9kYXNoJwogIGltcG9ydCB7IHV1aWQgfSBmcm9tICd1dWlkdjQnCiAgaW1wb3J0IHsgQ29tcG9uZW50LCBWdWUsIFByb3AgfSBmcm9tICd2dWUtcHJvcGVydHktZGVjb3JhdG9yJwogIGltcG9ydCB7IENyZWF0ZUVsZW1lbnQgfSBmcm9tICd2dWUnCiAgaW1wb3J0IHsgQnVpbGRlclRhZ01hcCB9IGZyb20gJy4vQnVpbGRlclRhZ01hcCcKICBpbXBvcnQgeyBFRWxlbWVudFBvc2l0aW9uIH0gZnJvbSAnLi4vZW51bS9FbGVtZW50cycKICBpbXBvcnQgewogICAgQ09OVEFJTkVSX0RFRkFVTFQsCiAgICBURVhUX0RFRkFVTFQsCiAgICBJTUFHRV9ERUZBVUxULAogICAgU1BBQ0VSX0RFRkFVTFQsCiAgICBCVVRUT05fREVGQVVMVCwKICAgIEJPWF9ERUZBVUxUCn0gZnJvbSAnLi4vY29uc3RhbnRzL0RlZmF1bHQnCiAgaW1wb3J0IEJveFBhZ2UgZnJvbSAnLi4vcGFnZXMvQm94JwogIGltcG9ydCBCdXR0b25QYWdlIGZyb20gJy4uL3BhZ2VzL0J1dHRvbicKICBpbXBvcnQgSW1hZ2VQYWdlIGZyb20gJy4uL3BhZ2VzL0ltYWdlJwogIGltcG9ydCBTcGFjZXJQYWdlIGZyb20gJy4uL3BhZ2VzL1NwYWNlcicKICBpbXBvcnQgVGV4dFBhZ2UgZnJvbSAnLi4vcGFnZXMvVGV4dCcKCiAgQENvbXBvbmVudCh7CiAgICBjb21wb25lbnRzOiB7IEJveFBhZ2UsIEJ1dHRvblBhZ2UsIEltYWdlUGFnZSwgU3BhY2VyUGFnZSwgVGV4dFBhZ2UgfSwKICB9KQogIGV4cG9ydCBkZWZhdWx0IGNsYXNzIEJ1aWxkZXJDYW52YXMgZXh0ZW5kcyBWdWUgewogICAgQFByb3AoKSB2aWV3SlNPTjogYW55CiAgICBAUHJvcCgpIHRlbXBsYXRlSnNvbjogYW55CgogICAgdmFsdWU6IGFueSA9IHt9CiAgICBwYXJlbnRJZCA9ICcnCiAgICBmb3VuZFBhcmVudCA9IGZhbHNlCiAgICBpbnNlcnRlZCA9IGZhbHNlCgogICAgZ2V0IGRlZmF1bHREYXRhKCk6IGFueSB7CiAgICAgIHJldHVybiB7CiAgICAgICAgQ09OVEFJTkVSX0RFRkFVTFQsCiAgICAgICAgVEVYVF9ERUZBVUxULAogICAgICAgIElNQUdFX0RFRkFVTFQsCiAgICAgICAgU1BBQ0VSX0RFRkFVTFQsCiAgICAgICAgQlVUVE9OX0RFRkFVTFQsCiAgICAgICAgQk9YX0RFRkFVTFQKICAgICAgfQogICAgfQoKICAgIGNyZWF0ZUNvbXBvbmVudChzdGF0ZTogYW55LCB0YWc6IENyZWF0ZUVsZW1lbnQpOiBhbnkgewogICAgICBpZiAoXy5pc0VtcHR5KHN0YXRlKSkgeyByZXR1cm4gdGFnKCJkaXYiKSB9CgogICAgICBpZiAoXy5pc0FycmF5KHN0YXRlKSkgewogICAgICAgIHJldHVybiBzdGF0ZS5tYXAoKGNoaWxkKSA9PiB0aGlzLmNyZWF0ZUNvbXBvbmVudChjaGlsZCwgdGFnKSkKICAgICAgfQoKICAgICAgY29uc3QgY2hpbGRyZW46IGFueVtdID0gW10KCiAgICAgIGlmIChzdGF0ZS5jaGlsZHJlbiAmJiBzdGF0ZS5jaGlsZHJlbi5sZW5ndGggPiAwKSB7CiAgICAgICAgc3RhdGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4gewogICAgICAgICAgY2hpbGRyZW4ucHVzaChfLmlzU3RyaW5nKGNoaWxkKSA/IGNoaWxkIDogdGhpcy5jcmVhdGVDb21wb25lbnQoY2hpbGQsIHRhZykpCiAgICAgICAgfSkKICAgICAgfQoKICAgICAgY29uc3Qgc3R5bGUgPSBzdGF0ZS5wcm9wcwogICAgICAgID8gewogICAgICAgICAgICAuLi5fLnBpY2soc3RhdGUucHJvcHMsIFsnYmFja2dyb3VuZC1jb2xvcicsICdmbGV4Ym94J10pLAogICAgICAgICAgICAuLi5zdGF0ZS5wcm9wcy5mbGV4Ym94LAogICAgICAgICAgICAuLi5zdGF0ZS5wcm9wc1snYm9yZGVyLWJvdHRvbSddCiAgICAgICAgICAgICAgICA/IHsKICAgICAgICAgICAgICAgICAgICAnYm9yZGVyLWJvdHRvbSc6CiAgICAgICAgICAgICAgICAgICAgICBgJHtzdGF0ZS5wcm9wc1snYm9yZGVyLWJvdHRvbSddLndpZHRofSAke3N0YXRlLnByb3BzWydib3JkZXItYm90dG9tJ10uc3R5bGV9ICR7c3RhdGUucHJvcHNbJ2JvcmRlci1ib3R0b20nXS5jb2xvcn1gCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkCiAgICAgICAgICB9CiAgICAgICAgICA6IHVuZGVmaW5lZAoKICAgICAgY29uc3QgcHJvcGVydGllcyA9IHsKICAgICAgICBwcm9wczogewogICAgICAgICAgZWxlbWVudElkOiBzdGF0ZS5pZCwKICAgICAgICAgIGVsZW1lbnROYW1lOiBfLmNhcGl0YWxpemUoc3RhdGUuZWxlbWVudCksCiAgICAgICAgICBlbGVtZW50UHJvcHM6IF8uY2xvbmVEZWVwKHN0YXRlLnByb3BzKQogICAgICAgIH0sCiAgICAgICAgb246IHsKICAgICAgICAgIGFkZDogKHZhbHVlOiBhbnkpID0+IHsKICAgICAgICAgICAgdGhpcy52YWx1ZSA9IHZhbHVlCiAgICAgICAgICAgIHRoaXMuZm91bmRQYXJlbnQgPSBmYWxzZQogICAgICAgICAgICBpZiAoXy5pbmNsdWRlcyhbRUVsZW1lbnRQb3NpdGlvbi5UT1AsIEVFbGVtZW50UG9zaXRpb24uQk9UVE9NXSwgdmFsdWUucG9zaXRpb24pKSB7CiAgICAgICAgICAgICAgdGhpcy5hZGRWZXJ0aWNhbEVsZW1lbnQoKQogICAgICAgICAgICB9IGVsc2UgaWYgKF8uaW5jbHVkZXMoW0VFbGVtZW50UG9zaXRpb24uTEVGVCwgRUVsZW1lbnRQb3NpdGlvbi5SSUdIVF0sIHZhbHVlLnBvc2l0aW9uKSkgewogICAgICAgICAgICAgIHRoaXMuYWRkSG9yaXplbnRhbEVsZW1lbnQoKQogICAgICAgICAgICB9CiAgICAgICAgICB9LAogICAgICAgICAgZHVwbGljYXRlOiAodmFsdWU6IGFueSkgPT4gewogICAgICAgICAgICB0aGlzLnZhbHVlID0gdmFsdWUKICAgICAgICAgICAgdGhpcy5mb3VuZFBhcmVudCA9IGZhbHNlCiAgICAgICAgICAgIGlmIChfLmluY2x1ZGVzKFtFRWxlbWVudFBvc2l0aW9uLlRPUCwgRUVsZW1lbnRQb3NpdGlvbi5CT1RUT01dLCB2YWx1ZS5wb3NpdGlvbikpIHsKICAgICAgICAgICAgICB0aGlzLmFkZFZlcnRpY2FsRWxlbWVudCgpCiAgICAgICAgICAgIH0gZWxzZSBpZiAoXy5pbmNsdWRlcyhbRUVsZW1lbnRQb3NpdGlvbi5MRUZULCBFRWxlbWVudFBvc2l0aW9uLlJJR0hUXSwgdmFsdWUucG9zaXRpb24pKSB7CiAgICAgICAgICAgICAgdGhpcy5hZGRIb3JpemVudGFsRWxlbWVudCgpCiAgICAgICAgICAgIH0KICAgICAgICAgIH0sCiAgICAgICAgICBkZWxldGU6IChpZDogc3RyaW5nKSA9PiB7CiAgICAgICAgICAgIHRoaXMudmFsdWUuaWQgPSBpZAogICAgICAgICAgICB0aGlzLmRlbGV0ZUVsZW1lbnQoKQogICAgICAgICAgfSwKICAgICAgICAgIGRvbmU6IChpdGVtOiBhbnkpID0+IHsKICAgICAgICAgICAgaWYgKHN0YXRlLmlkID09PSBpdGVtLmlkKSB7CiAgICAgICAgICAgICAgc3RhdGUucHJvcHMgPSB7CiAgICAgICAgICAgICAgICAuLi5pdGVtLnByb3BzLAogICAgICAgICAgICAgICAgLi4uKAogICAgICAgICAgICAgICAgICAgIF8uY2xvbmVEZWVwKGl0ZW0ucHJvcHMpWydib3JkZXItYm90dG9tJ10KICAgICAgICAgICAgICAgICAgICAgID8geyAnYm9yZGVyLWJvdHRvbScgOiBfLmNsb25lRGVlcChpdGVtLnByb3BzKVsnYm9yZGVyLWJvdHRvbSddIH0KICAgICAgICAgICAgICAgICAgICAgIDogdW5kZWZpbmVkCiAgICAgICAgICAgICAgICAgICkKICAgICAgICAgICAgICB9CiAgICAgICAgICAgIH0KICAgICAgICAgIH0KICAgICAgICB9LAogICAgICAgIHN0eWxlOiBzdHlsZQogICAgICB9CgogICAgICBjb25zdCB0YWdOYW1lID0gQnVpbGRlclRhZ01hcC5nZXRUYWcoc3RhdGUuZWxlbWVudCkKCiAgICAgIHJldHVybiB0YWcodGFnTmFtZSwgcHJvcGVydGllcywgY2hpbGRyZW4pCiAgICB9CgogICAgYWRkSG9yaXplbnRhbEVsZW1lbnQoc3RhdGU6IGFueSA9IHRoaXMudGVtcGxhdGVKc29uKSB7CiAgICAgIGlmIChzdGF0ZS5jaGlsZHJlbikgewogICAgICAgIGxldCBpbmRleEluc2VydCA9IDAKICAgICAgICBzdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHsKICAgICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLnZhbHVlLmlkKSB7CiAgICAgICAgICAgIGluZGV4SW5zZXJ0ID0gRUVsZW1lbnRQb3NpdGlvbi5MRUZUID09PSB0aGlzLnZhbHVlLnBvc2l0aW9uID8gaW5kZXggOiBpbmRleCArIDEKICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudmFsdWUuZHVwbGljYXRlCiAgICAgICAgICAgICAgPyB7IC4uLl8uY2xvbmVEZWVwKGl0ZW0pIH0KICAgICAgICAgICAgICA6IHsgLi4uXy5jbG9uZURlZXAodGhpcy5kZWZhdWx0RGF0YVtgJHt0aGlzLnZhbHVlLmVsZW1lbnR9X0RFRkFVTFRgXSkgfQogICAgICAgICAgICBzdGF0ZS5jaGlsZHJlbi5zcGxpY2UoaW5kZXhJbnNlcnQsIDAsIHsgLi4uZGF0YSwgaWQ6IHV1aWQoKSB9KQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5hZGRIb3JpemVudGFsRWxlbWVudChpdGVtKQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KCiAgICBhZGRWZXJ0aWNhbEVsZW1lbnQoc3RhdGU6IGFueSA9IHRoaXMudGVtcGxhdGVKc29uKSB7CiAgICAgIGlmIChzdGF0ZS5jaGlsZHJlbikgewogICAgICAgIGxldCBpbmRleEluc2VydCA9IDAKICAgICAgICBzdGF0ZS5jaGlsZHJlbi5mb3JFYWNoKChpdGVtOiBhbnksIGluZGV4OiBudW1iZXIpID0+IHsKICAgICAgICAgIGlmICh0aGlzLmZvdW5kUGFyZW50KSB7CiAgICAgICAgICAgIGlmIChpdGVtLmlkID09PSB0aGlzLnBhcmVudElkKSB7CiAgICAgICAgICAgICAgaW5kZXhJbnNlcnQgPSBFRWxlbWVudFBvc2l0aW9uLlRPUCA9PT0gdGhpcy52YWx1ZS5wb3NpdGlvbiA/IGluZGV4IDogaW5kZXggKyAxCiAgICAgICAgICAgICAgY29uc3Qga2V5OiBhbnkgPSBfLmZpbmRLZXkoaXRlbS5jaGlsZHJlbiwgY2hpbGQgPT4gY2hpbGQuaWQgPT09IHRoaXMudmFsdWUuaWQpCiAgICAgICAgICAgICAgY29uc3QgZGF0YSA9IHRoaXMudmFsdWUuZHVwbGljYXRlCiAgICAgICAgICAgICAgICA/IHsgCiAgICAgICAgICAgICAgICAgICAgLi4uXy5jbG9uZURlZXAoewogICAgICAgICAgICAgICAgICAgIC4uLml0ZW0sCiAgICAgICAgICAgICAgICAgICAgY2hpbGRyZW46IF8oaXRlbS5jaGlsZHJlbikKICAgICAgICAgICAgICAgICAgICAgIC5tYXAoKGNoaWxkOiBhbnkpID0+IHsgcmV0dXJuIHsgLi4uY2hpbGQsIGlkOiB1dWlkKCkgfSB9KQogICAgICAgICAgICAgICAgICAgICAgLmZpbHRlcigoY2hpbGQ6IGFueSwgaW5kZXg6IG51bWJlcikgPT4gaW5kZXggPT09IF8ucGFyc2VJbnQoa2V5KSkKICAgICAgICAgICAgICAgICAgICAgIC5jbG9uZURlZXAoKQogICAgICAgICAgICAgICAgICAgIH0pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICAgIDogeyAKICAgICAgICAgICAgICAgICAgICAuLi5fLmNsb25lRGVlcCh0aGlzLmRlZmF1bHREYXRhWydDT05UQUlORVJfREVGQVVMVCddKSwKICAgICAgICAgICAgICAgICAgICBpZDogdXVpZCgpLAogICAgICAgICAgICAgICAgICAgIGNoaWxkcmVuOiBfLmNsb25lRGVlcChbewogICAgICAgICAgICAgICAgICAgICAgaWQ6IHV1aWQoKSwKICAgICAgICAgICAgICAgICAgICAgIC4uLl8uY2xvbmVEZWVwKHRoaXMuZGVmYXVsdERhdGFbYCR7dGhpcy52YWx1ZS5lbGVtZW50fV9ERUZBVUxUYF0pCiAgICAgICAgICAgICAgICAgICAgfV0pCiAgICAgICAgICAgICAgICAgIH0KICAgICAgICAgICAgICBpZiAoIXRoaXMuaW5zZXJ0ZWQpIHsKICAgICAgICAgICAgICAgIHN0YXRlLmNoaWxkcmVuLnNwbGljZShpbmRleEluc2VydCwgMCwgeyAuLi5kYXRhLCBpZDogdXVpZCgpIH0pCiAgICAgICAgICAgICAgICB0aGlzLmluc2VydGVkID0gdHJ1ZQogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgICB0aGlzLmFkZFZlcnRpY2FsRWxlbWVudChpdGVtKQogICAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgdGhpcy5mb3VuZFBhcmVudCA9IGl0ZW0uaWQgPT09IHRoaXMudmFsdWUuaWQKICAgICAgICAgICAgdGhpcy5wYXJlbnRJZCA9IHN0YXRlLmlkCiAgICAgICAgICAgIHRoaXMuaW5zZXJ0ZWQgPSBmYWxzZQogICAgICAgICAgICB0aGlzLmFkZFZlcnRpY2FsRWxlbWVudCh0aGlzLmZvdW5kUGFyZW50ID8gdW5kZWZpbmVkIDogaXRlbSkKICAgICAgICAgIH0KICAgICAgICB9KQogICAgICB9CiAgICB9CgogICAgZGVsZXRlRWxlbWVudChzdGF0ZTogYW55ID0gdGhpcy50ZW1wbGF0ZUpzb24pIHsKICAgICAgaWYgKHN0YXRlLmNoaWxkcmVuKSB7CiAgICAgICAgc3RhdGUuY2hpbGRyZW4uZm9yRWFjaCgoY2hpbGQ6IGFueSkgPT4gewogICAgICAgICAgaWYgKGNoaWxkLmlkID09PSB0aGlzLnZhbHVlLmlkKSB7CiAgICAgICAgICAgIHN0YXRlLmNoaWxkcmVuID0gXy5maWx0ZXIoc3RhdGUuY2hpbGRyZW4sIGl0ZW0gPT4gdGhpcy52YWx1ZS5pZCAhPT0gaXRlbS5pZCkKICAgICAgICAgICAgdGhpcy5kZWxldGVDaGlsZEVsZW1lbnQoKQogICAgICAgICAgfQogICAgICAgICAgdGhpcy5kZWxldGVFbGVtZW50KGNoaWxkKQogICAgICAgIH0pCiAgICAgIH0KICAgIH0KCiAgICBkZWxldGVDaGlsZEVsZW1lbnQoc3RhdGU6IGFueSA9IHRoaXMudGVtcGxhdGVKc29uKSB7CiAgICAgIGlmIChzdGF0ZS5jaGlsZHJlbikgewogICAgICAgIHN0YXRlLmNoaWxkcmVuID0gXy5maWx0ZXIoc3RhdGUuY2hpbGRyZW4sIGl0ZW0gPT4gaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwKQogICAgICB9CiAgICAgIHJldHVybgogICAgfQoKICAgIHJlbmRlcihjcmVhdGVFbGVtZW50OiBDcmVhdGVFbGVtZW50KSB7CiAgICAgIHJldHVybiB0aGlzLmNyZWF0ZUNvbXBvbmVudCh0aGlzLnRlbXBsYXRlSnNvbiwgY3JlYXRlRWxlbWVudCkKICAgIH0KICB9Cg=="},{"version":3,"sources":["BuilderCanvas.vue"],"names":[],"mappings":";AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA","file":"BuilderCanvas.vue","sourceRoot":"src/builder","sourcesContent":["<script lang=\"ts\">\n  import _ from 'lodash'\n  import { uuid } from 'uuidv4'\n  import { Component, Vue, Prop } from 'vue-property-decorator'\n  import { CreateElement } from 'vue'\n  import { BuilderTagMap } from './BuilderTagMap'\n  import { EElementPosition } from '../enum/Elements'\n  import {\n    CONTAINER_DEFAULT,\n    TEXT_DEFAULT,\n    IMAGE_DEFAULT,\n    SPACER_DEFAULT,\n    BUTTON_DEFAULT,\n    BOX_DEFAULT\n} from '../constants/Default'\n  import BoxPage from '../pages/Box'\n  import ButtonPage from '../pages/Button'\n  import ImagePage from '../pages/Image'\n  import SpacerPage from '../pages/Spacer'\n  import TextPage from '../pages/Text'\n\n  @Component({\n    components: { BoxPage, ButtonPage, ImagePage, SpacerPage, TextPage },\n  })\n  export default class BuilderCanvas extends Vue {\n    @Prop() viewJSON: any\n    @Prop() templateJson: any\n\n    value: any = {}\n    parentId = ''\n    foundParent = false\n    inserted = false\n\n    get defaultData(): any {\n      return {\n        CONTAINER_DEFAULT,\n        TEXT_DEFAULT,\n        IMAGE_DEFAULT,\n        SPACER_DEFAULT,\n        BUTTON_DEFAULT,\n        BOX_DEFAULT\n      }\n    }\n\n    createComponent(state: any, tag: CreateElement): any {\n      if (_.isEmpty(state)) { return tag(\"div\") }\n\n      if (_.isArray(state)) {\n        return state.map((child) => this.createComponent(child, tag))\n      }\n\n      const children: any[] = []\n\n      if (state.children && state.children.length > 0) {\n        state.children.forEach((child: any) => {\n          children.push(_.isString(child) ? child : this.createComponent(child, tag))\n        })\n      }\n\n      const style = state.props\n        ? {\n            ..._.pick(state.props, ['background-color', 'flexbox']),\n            ...state.props.flexbox,\n            ...state.props['border-bottom']\n                ? {\n                    'border-bottom':\n                      `${state.props['border-bottom'].width} ${state.props['border-bottom'].style} ${state.props['border-bottom'].color}`\n                  }\n                : undefined\n          }\n          : undefined\n\n      const properties = {\n        props: {\n          elementId: state.id,\n          elementName: _.capitalize(state.element),\n          elementProps: _.cloneDeep(state.props)\n        },\n        on: {\n          add: (value: any) => {\n            this.value = value\n            this.foundParent = false\n            if (_.includes([EElementPosition.TOP, EElementPosition.BOTTOM], value.position)) {\n              this.addVerticalElement()\n            } else if (_.includes([EElementPosition.LEFT, EElementPosition.RIGHT], value.position)) {\n              this.addHorizentalElement()\n            }\n          },\n          duplicate: (value: any) => {\n            this.value = value\n            this.foundParent = false\n            if (_.includes([EElementPosition.TOP, EElementPosition.BOTTOM], value.position)) {\n              this.addVerticalElement()\n            } else if (_.includes([EElementPosition.LEFT, EElementPosition.RIGHT], value.position)) {\n              this.addHorizentalElement()\n            }\n          },\n          delete: (id: string) => {\n            this.value.id = id\n            this.deleteElement()\n          },\n          done: (item: any) => {\n            if (state.id === item.id) {\n              state.props = {\n                ...item.props,\n                ...(\n                    _.cloneDeep(item.props)['border-bottom']\n                      ? { 'border-bottom' : _.cloneDeep(item.props)['border-bottom'] }\n                      : undefined\n                  )\n              }\n            }\n          }\n        },\n        style: style\n      }\n\n      const tagName = BuilderTagMap.getTag(state.element)\n\n      return tag(tagName, properties, children)\n    }\n\n    addHorizentalElement(state: any = this.templateJson) {\n      if (state.children) {\n        let indexInsert = 0\n        state.children.forEach((item: any, index: number) => {\n          if (item.id === this.value.id) {\n            indexInsert = EElementPosition.LEFT === this.value.position ? index : index + 1\n            const data = this.value.duplicate\n              ? { ..._.cloneDeep(item) }\n              : { ..._.cloneDeep(this.defaultData[`${this.value.element}_DEFAULT`]) }\n            state.children.splice(indexInsert, 0, { ...data, id: uuid() })\n          }\n          this.addHorizentalElement(item)\n        })\n      }\n    }\n\n    addVerticalElement(state: any = this.templateJson) {\n      if (state.children) {\n        let indexInsert = 0\n        state.children.forEach((item: any, index: number) => {\n          if (this.foundParent) {\n            if (item.id === this.parentId) {\n              indexInsert = EElementPosition.TOP === this.value.position ? index : index + 1\n              const key: any = _.findKey(item.children, child => child.id === this.value.id)\n              const data = this.value.duplicate\n                ? { \n                    ..._.cloneDeep({\n                    ...item,\n                    children: _(item.children)\n                      .map((child: any) => { return { ...child, id: uuid() } })\n                      .filter((child: any, index: number) => index === _.parseInt(key))\n                      .cloneDeep()\n                    })\n                  }\n                : { \n                    ..._.cloneDeep(this.defaultData['CONTAINER_DEFAULT']),\n                    id: uuid(),\n                    children: _.cloneDeep([{\n                      id: uuid(),\n                      ..._.cloneDeep(this.defaultData[`${this.value.element}_DEFAULT`])\n                    }])\n                  }\n              if (!this.inserted) {\n                state.children.splice(indexInsert, 0, { ...data, id: uuid() })\n                this.inserted = true\n              }\n            }\n            this.addVerticalElement(item)\n          } else {\n            this.foundParent = item.id === this.value.id\n            this.parentId = state.id\n            this.inserted = false\n            this.addVerticalElement(this.foundParent ? undefined : item)\n          }\n        })\n      }\n    }\n\n    deleteElement(state: any = this.templateJson) {\n      if (state.children) {\n        state.children.forEach((child: any) => {\n          if (child.id === this.value.id) {\n            state.children = _.filter(state.children, item => this.value.id !== item.id)\n            this.deleteChildElement()\n          }\n          this.deleteElement(child)\n        })\n      }\n    }\n\n    deleteChildElement(state: any = this.templateJson) {\n      if (state.children) {\n        state.children = _.filter(state.children, item => item.children.length > 0)\n      }\n      return\n    }\n\n    render(createElement: CreateElement) {\n      return this.createComponent(this.templateJson, createElement)\n    }\n  }\n</script>\n"]}]}